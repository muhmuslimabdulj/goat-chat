@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --bg-color: #FFF4E0;
  --primary-color: #FFD100;
  --accent-color: #FF6B9C;
}

/* Override Default Blue Selection with Theme Neutral */
*::selection {
  background-color: rgba(0, 0, 0, 0.2);
  /* Neutral Transparent Black */
  color: inherit;
}

@layer base {
  html {
    font-family: 'Inter', system-ui, sans-serif;
  }

  body {
    background-color: var(--bg-color);
  }
}

@layer components {
  .shadow-brutal {
    box-shadow: 8px 8px 0 0 rgba(0, 0, 0, 1);
  }

  .shadow-brutal-sm {
    box-shadow: 4px 4px 0 0 rgba(0, 0, 0, 1);
  }
}

@layer utilities {

  /* --- PARTY MODE STYLES --- */

  /* 1. Chill Mode */
  .party-chill {
    background: radial-gradient(circle at center, rgba(15, 12, 41, 0.4) 0%, rgba(48, 43, 99, 0.7) 50%, rgba(36, 36, 62, 0.9) 100%);
    backdrop-filter: blur(2px) grayscale(30%);
    pointer-events: none;
    z-index: 40;
    will-change: transform;
    transform: translateZ(0);
    /* Force GPU layer */
  }

  /* 2. Rave Mode - Base styles shared by all variants */
  .party-rave-slow,
  .party-rave-medium,
  .party-rave-fast,
  .party-rave-insane {
    pointer-events: none;
    z-index: 40;
    will-change: transform, opacity, background;
    transform: translateZ(0);
  }

  /* Rave Slow (80 BPM) - 750ms per beat */
  .party-rave-slow {
    animation: rave-strobe 0.75s infinite, rave-pulse 1.5s ease-in-out infinite;
  }

  /* Rave Medium (120 BPM) - 500ms per beat */
  .party-rave-medium {
    animation: rave-strobe 0.5s infinite, rave-pulse 1s ease-in-out infinite;
  }

  /* Rave Fast (140 BPM) - ~428ms per beat */
  .party-rave-fast {
    animation: rave-strobe 0.35s infinite, rave-pulse 0.7s ease-in-out infinite;
  }

  /* Rave Insane (170 BPM) - ~353ms per beat */
  .party-rave-insane {
    animation: rave-strobe 0.18s infinite, rave-pulse 0.35s ease-in-out infinite;
  }

  @keyframes rave-strobe {
    0% {
      background: linear-gradient(135deg, rgba(255, 0, 100, 0.5), rgba(255, 0, 0, 0.3));
      box-shadow: inset 0 0 100px rgba(255, 0, 100, 0.8), 0 0 50px rgba(255, 0, 100, 0.5);
    }

    25% {
      background: linear-gradient(45deg, rgba(0, 255, 100, 0.5), rgba(0, 255, 0, 0.3));
      box-shadow: inset 0 0 100px rgba(0, 255, 100, 0.8), 0 0 50px rgba(0, 255, 100, 0.5);
    }

    50% {
      background: linear-gradient(225deg, rgba(100, 0, 255, 0.5), rgba(0, 0, 255, 0.3));
      box-shadow: inset 0 0 100px rgba(100, 0, 255, 0.8), 0 0 50px rgba(100, 0, 255, 0.5);
    }

    75% {
      background: linear-gradient(315deg, rgba(255, 255, 0, 0.5), rgba(255, 100, 0, 0.3));
      box-shadow: inset 0 0 100px rgba(255, 255, 0, 0.8), 0 0 50px rgba(255, 255, 0, 0.5);
    }

    100% {
      background: linear-gradient(135deg, rgba(255, 0, 255, 0.5), rgba(100, 0, 255, 0.3));
      box-shadow: inset 0 0 100px rgba(255, 0, 255, 0.8), 0 0 50px rgba(255, 0, 255, 0.5);
    }
  }

  @keyframes rave-pulse {

    0%,
    100% {
      opacity: 0.7;
      transform: translateZ(0) scale(1);
    }

    50% {
      opacity: 1;
      transform: translateZ(0) scale(1.02);
    }
  }

  /* Rave floating emoji effect */
  .rave-emoji {
    position: fixed;
    font-size: 2rem;
    pointer-events: none;
    z-index: 45;
    animation: rave-emoji-float 2s ease-out forwards;
    will-change: transform, opacity;
  }

  @keyframes rave-emoji-float {
    0% {
      opacity: 1;
      transform: translateY(0) rotate(0deg) scale(1);
    }

    50% {
      opacity: 1;
      transform: translateY(-100px) rotate(180deg) scale(1.5);
    }

    100% {
      opacity: 0;
      transform: translateY(-200px) rotate(360deg) scale(0.5);
    }
  }

  /* 3. Galau Mode */
  .party-galau {
    background: radial-gradient(circle, rgba(255, 192, 203, 0.1) 0%, rgba(148, 0, 22, 0.6) 100%);
    box-shadow: inset 0 0 100px rgba(0, 0, 0, 0.8);
    backdrop-filter: sepia(40%) contrast(110%);
    pointer-events: none;
    z-index: 40;
    will-change: transform;
    transform: translateZ(0);
  }

  /* 4. Disco Mode (Moved & Updated) */
  .party-disco {
    background: linear-gradient(45deg, #FF0000, #FF7F00, #FFFF00, #00FF00, #0000FF, #4B0082, #9400D3);
    background-size: 1400% 1400%;
    animation: disco-bg 5s ease infinite;
    opacity: 0.4;
    /* mix-blend-mode removed to prevent flickering artifacts */
    pointer-events: none;
    z-index: 40;
    will-change: transform, background-position;
    transform: translateZ(0);
  }

  @keyframes disco-bg {
    0% {
      background-position: 0% 50%
    }

    50% {
      background-position: 100% 50%
    }

    100% {
      background-position: 0% 50%
    }
  }

  /* 5. Horror Mode */
  .party-horror {
    background-color: rgba(0, 0, 0, 0.2);
    backdrop-filter: grayscale(100%) contrast(120%);
    box-shadow: inset 0 0 200px #000;
    /* Stronger vignette */
    pointer-events: none;
    z-index: 40;
    will-change: transform, opacity;
    transform: translateZ(0);
  }

  /* Animation removed for stability */

  /* 6. Zen Mode */
  .party-zen {
    background: linear-gradient(to bottom, rgba(168, 255, 120, 0.2), rgba(120, 255, 214, 0.2));
    backdrop-filter: brightness(110%) saturate(80%);
    animation: zen-breathe 8s ease-in-out infinite;
    pointer-events: none;
    z-index: 40;
    will-change: transform, opacity;
    transform: translateZ(0);
  }

  @keyframes zen-breathe {

    0%,
    100% {
      opacity: 0.3;
    }

    50% {
      opacity: 0.6;
    }
  }

  /* 7. Cinema Mode */
  .party-cinema {
    /* Letterbox handled by pseudo-elements or borders */
    border-top: 10vh solid black;
    border-bottom: 10vh solid black;
    backdrop-filter: brightness(90%) contrast(120%);
    background: rgba(255, 165, 0, 0.05);
    /* Slight teal/orange tint base */
    pointer-events: none;
    z-index: 40;
    transition: all 1s ease;
    will-change: transform;
    transform: translateZ(0);
  }

  /* --- END PARTY MODES --- */


  /* Disco / Chaos mode animation (Legacy - kept for compatibility if needed) */
  .disco-overlay {
    background: linear-gradient(45deg,
        #FF6AC1,
        #FFD100,
        #00E676,
        #00E5FF,
        #B388FF,
        #FF5252);
    background-size: 600% 600%;
    animation: disco 0.5s ease infinite;
    opacity: 0.3;
  }

  @keyframes disco {

    0%,
    100% {
      background-position: 0% 50%;
    }

    50% {
      background-position: 100% 50%;
    }
  }

  /* Floating reaction animation */
  .reaction-float {
    animation: floatUp 2s ease-out forwards;
  }

  @keyframes floatUp {
    0% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    50% {
      opacity: 1;
      transform: translateY(-100px) scale(1.5);
    }

    100% {
      opacity: 0;
      transform: translateY(-200px) scale(0.5) rotate(20deg);
    }
  }

  /* Nudge shake animation */
  .shake {
    animation: shake 0.5s ease-in-out;
  }

  @keyframes shake {

    0%,
    100% {
      transform: translateX(0);
    }

    10%,
    30%,
    50%,
    70%,
    90% {
      transform: translateX(-5px);
    }

    20%,
    40%,
    60%,
    80% {
      transform: translateX(5px);
    }
  }

  /* Spin text animation */
  .spin-text {
    animation: spin-around 2s linear infinite;
    display: inline-block;
  }

  @keyframes spin-around {
    from {
      transform: rotate(0deg);
    }

    to {
      transform: rotate(360deg);
    }
  }

  /* Confetti fall animation */
  @keyframes confetti-fall {
    0% {
      top: -20px;
      opacity: 1;
      transform: rotate(0deg);
    }

    100% {
      top: 100vh;
      opacity: 0;
      transform: rotate(720deg);
    }
  }

  /* Typing indicator pulse */
  .typing-pulse {
    animation: pulse-dot 1.5s ease-in-out infinite;
  }

  .typing-pulse:nth-child(2) {
    animation-delay: 0.2s;
  }

  .typing-pulse:nth-child(3) {
    animation-delay: 0.4s;
  }

  @keyframes pulse-dot {

    0%,
    100% {
      opacity: 0.3;
      transform: scale(0.8);
    }

    50% {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* CAPS warning flash */
  .caps-warning {
    animation: caps-flash 0.5s ease-in-out;
    color: #ff0000 !important;
  }

  @keyframes caps-flash {

    0%,
    100% {
      opacity: 1;
    }

    50% {
      opacity: 0.5;
    }
  }

  /* Whisper message styling */
  .whisper-msg {
    background: #1a1a2e;
    position: relative;
  }

  .whisper-msg-sent {
    background: linear-gradient(135deg, #2d3436 0%, #000000 100%);
    border-color: #6c5ce7 !important;
  }

  .whisper-msg-received {
    background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
    border-color: #000 !important;
  }

  /* GIF container */
  .gif-container img {
    max-width: 300px;
    max-height: 200px;
    border-radius: 8px;
    border: 3px solid black;
  }

  /* Poll styling */
  .poll-option {
    transition: all 0.3s ease;
  }

  .poll-option:hover {
    transform: translateX(4px);
  }

  .poll-bar {
    transition: width 0.5s ease;
  }

  /* Dice animation */
  .dice-result {
    animation: dice-bounce 0.5s ease;
  }

  @keyframes dice-bounce {

    0%,
    100% {
      transform: scale(1);
    }

    50% {
      transform: scale(1.3) rotate(10deg);
    }
  }

  /* Success celebration animations */
  .success-glow {
    animation: success-glow 1.5s ease-in-out infinite alternate;
  }

  @keyframes success-glow {
    0% {
      box-shadow: 6px 6px 0 0 #000, 0 0 0 0 rgba(0, 230, 118, 0);
    }

    100% {
      box-shadow: 6px 6px 0 0 #000, 0 0 20px 5px rgba(0, 230, 118, 0.5);
    }
  }

  .success-slide-in {
    animation: slide-in 0.4s ease-out;
  }

  @keyframes slide-in {
    0% {
      opacity: 0;
      transform: translateY(-20px) scale(0.95);
    }

    100% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
  }

  .sparkle {
    animation: sparkle 0.8s ease-in-out infinite;
  }

  @keyframes sparkle {

    0%,
    100% {
      transform: scale(1) rotate(0deg);
    }

    50% {
      transform: scale(1.2) rotate(10deg);
    }
  }

  /* Theme transition */

  body,
  .theme-transition {
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 12px;
  }

  ::-webkit-scrollbar-track {
    background: #E0E0E0;
    border-left: 4px solid black;
  }

  ::-webkit-scrollbar-thumb {
    background: #000;
    border: 2px solid #E0E0E0;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: #333;
  }
}